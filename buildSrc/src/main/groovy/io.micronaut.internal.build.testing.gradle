plugins {
    id 'java'
    id 'pl.droidsonroids.jacoco.testkit'
}

tasks.withType(Test).configureEach {
    useJUnitPlatform()
    inputs.property("GRAALVM_HOME", providers.environmentVariable('GRAALVM_HOME').forUseAtConfigurationTime().getOrElse(""))
    predictiveSelection {
        enabled = micronautBuild.environment.isTestSelectionEnabled()
    }
}

dependencies {
    testImplementation libs.groovy.core
    testImplementation libs.spock.core
    testImplementation libs.spock.junit4
}
